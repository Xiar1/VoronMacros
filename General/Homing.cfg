[homing_override]
axes: xyz
set_position_z: 0
variable_z_hop: 10                ;Set z hop height
variable_enable_z_hop: True       ;Set whether to use z hop or not
variable_homing_speed: 60         ;Set speed to move to the z home location in mm/s
variable_home_z_x_pos: 0          ;Set X position for z homing
variable_home_z_y_pos: 0          ;Set Y position for z homing
variable_enable_z_home_pos: False ;Whether to enable xy postion for z homing
gcode:
  
  G90

  {% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}

  {% if home_all or 'X' in params %}
    {% if enable_z_hop %}
			G0 Z{z_hop} F1000
		{% endif %}
    G28 X
		G91
		G1 X-10
		G90
		M400
  {% endif %}

  {% if home_all or 'Y' in params %}
    {% if enable_z_hop %}
			G0 Z{z_hop} F1000
		{% endif %}
    G28 Y
		G91
		G1 Y-10
		G90
		M400
  {% endif %}
  
  {% if home_all or 'Z' in params %}
		{% if enable_z_home_pos %}
			G0 X{home_z_x_pos} Y{home_z_x_pos} F{homing_speed * 60}
		{% endif %}
    G28 Z
  {% endif %}